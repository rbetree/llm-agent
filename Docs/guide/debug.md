# 故障排除

### 常见问题解决

1. **无法连接到API**
   - 检查API密钥是否正确且有效
   - 验证网络连接是否正常
   - 确认API服务提供商的服务状态
   - 检查API主机地址格式是否正确（如：https://api.openai.com/v1）
   - 对于国内用户，确认网络环境可以访问海外API服务
   - 检查防火墙设置是否阻止了应用程序的网络访问
   - 使用渠道管理页面的"测试连接"功能验证配置

2. **安装失败**
   - 确保您有管理员权限
   - 关闭杀毒软件或将应用程序添加到例外列表
   - 确保.NET 8.0运行时已正确安装
   - 检查Windows版本是否为Windows 10/11
   - 确保有足够的磁盘空间

3. **应用程序启动失败**
   - 检查是否安装了.NET 8.0 Runtime
   - 确认WebView2运行时已安装（Windows 11通常已预装）
   - 检查应用程序目录权限，确保有读写权限
   - 检查数据库文件是否被其他程序占用
   - 尝试以管理员身份运行应用程序

4. **登录问题**
   - 确认用户名和密码输入正确
   - 检查数据库文件是否存在且可访问
   - 如果忘记密码，可以删除数据库文件重新开始（会丢失所有数据）

5. **聊天功能异常**
   - 检查是否已正确配置API渠道
   - 确认选择的模型在当前渠道中可用
   - 检查网络连接和API服务状态
   - 查看控制台输出的错误信息

### 日志和诊断

应用程序主要通过控制台输出错误信息进行调试。如果遇到问题，可以：

1. **查看控制台输出**：
   - 在Visual Studio中运行应用程序查看控制台输出
   - 或者通过命令行启动应用程序查看错误信息

2. **检查数据库文件**：
   - 检查应用程序目录下的数据库文件 `llm_agent.db` 是否存在且可访问
   - 确认数据库文件没有被其他程序占用

3. **系统日志**：
   - 查看Windows事件查看器中的应用程序错误日志
   - 检查.NET运行时相关的错误信息

4. **网络诊断**：
   - 使用渠道管理页面的"测试连接"功能验证API连接
   - 检查防火墙设置是否阻止了网络连接

### 常见错误代码

- **API连接超时**：检查网络连接和API服务状态，可能需要更换网络环境
- **认证失败**：验证API密钥的正确性和有效性，检查是否过期
- **模型不可用**：确认选择的模型在当前API提供商中可用，可能需要更新模型列表
- **数据库锁定**：确保没有多个应用程序实例同时运行
- **权限不足**：检查应用程序目录的读写权限

### 获取技术支持

如果遇到无法解决的问题：

1. **收集错误信息**：
   - 记录具体的错误消息
   - 截图错误界面
   - 记录操作步骤

2. **联系方式**：
   - GitHub Issues: [提交问题报告](https://github.com/rbetree/llm-agent/issues)
   - 项目文档: [在线文档](https://rbetree.github.io/llm-agent/)

3. **提供信息**：
   - 操作系统版本
   - .NET运行时版本
   - 应用程序版本
   - 具体错误信息和重现步骤